# 目标
- 增加登录/注册界面，使未登录用户先进入认证流程。
- 在“健康数据中心”页面增加“导入数据”入口，点击后进入导入页面，支持选择 CSV/JSON 文件并解析预览与导入。

## 新增页面
- LoginScreen：账号、密码输入，基础校验，登录按钮，跳转注册链接，错误提示与加载状态。
- RegisterScreen：账号、密码、确认密码输入，基础校验（长度、两次密码一致），注册成功提示并可返回登录或直接登录。
- ImportDataScreen：
  - 提供“选择文件”按钮（使用 SAF），支持 `text/csv` 与 `application/json`。
  - 解析所选文件并展示预览（如日期、步数、睡眠时长、心率等字段的摘要）。
  - “确认导入”后写入本地内存存储（ViewModel），并给出成功/失败反馈。

## 路由与导航
- NavHost 新增路由：`auth/login`、`auth/register`、`import`。
- 将 `HealthHubScreen` 接收 `NavHostController`，在顶部或显著位置添加“导入数据”按钮，点击导航到 `import` 路由。
- 在 `BottomNavBar` 中根据当前路由控制可见性：当处于 `auth/*` 或 `import` 路由时隐藏底部栏与悬浮 AI 按钮。

## 认证逻辑
- 新建 `AuthViewModel`（使用 lifecycle-viewmodel-compose）持有 `isLoggedIn`、`login()`、`register()` 状态与方法。
- `NavHost` 的 `startDestination` 由 `isLoggedIn` 动态决定：未登录为 `auth/login`，已登录为首页。
- 登录成功后设置 `isLoggedIn = true` 并 `navigate` 到首页，同时 `popUpTo` 清理登录栈。

## 数据导入流程
- 使用 `rememberLauncherForActivityResult(ActivityResultContracts.OpenDocument)` 打开文档选择器，MIME 过滤为 CSV/JSON。
- 读取所选 `Uri`：`contentResolver.openInputStream(uri)`；根据后缀/用户选择解析。
- CSV 解析策略：首行字段映射（日期、步数、睡眠时长、心率等），其余行为数据；JSON 解析键值。
- 新建 `DataImportViewModel` 负责解析与暂存导入的数据；在 `DataScreen`（或相关模块）读取并合并显示。
- 错误处理：非法格式/解析错误给出用户提示；导入成功显示统计摘要与返回按钮。

## 依赖与权限
- 依赖新增：`androidx.lifecycle:lifecycle-viewmodel-compose:2.7.0`（用于在 Compose 中获取 ViewModel）。
- 权限：采用 SAF，无需外部存储读取权限；不涉及后端或敏感信息存储。

## UI/交互规范
- 表单按主题与圆角规范统一，按钮启用需满足校验通过。
- 导入页包含：文件类型说明、预览列表、条目统计（如总条数、时间范围）、导入/取消按钮。
- 所有提示与文案保持中文，并遵循当前色彩与排版体系。

## 验证方案
- 首次启动显示登录页；输入有效信息后登录到首页。
- 打开“健康”页面，点击“导入数据”进入导入页；选择 CSV/JSON，预览正确；确认导入后在“数据”页看到合并后的新数据摘要。
- 验证路由切换时底部栏与悬浮按钮的显示逻辑正确。

## 变更文件
- 新增：
  - `app/src/main/java/.../ui/screens/LoginScreen.kt`
  - `app/src/main/java/.../ui/screens/RegisterScreen.kt`
  - `app/src/main/java/.../ui/screens/ImportDataScreen.kt`
  - `app/src/main/java/.../viewmodel/AuthViewModel.kt`
  - `app/src/main/java/.../viewmodel/DataImportViewModel.kt`
- 更新：
  - `app/src/main/java/.../ui/navigation/BottomNavBar.kt`（新增路由、可见性控制）
  - `app/src/main/java/.../ui/screens/HealthHubScreen.kt`（接收 `NavHostController`、添加“导入数据”按钮）
  - 如需，在 `MainActivity.kt` 中传递/获取 ViewModel 或调整 `NavHost` 初始路由逻辑。

请确认以上实现方案；确认后我将开始具体编码与调整，保持代码风格与现有架构一致，并进行运行验证。